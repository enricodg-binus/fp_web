{"version":3,"sources":["../src/base-widget.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAA,EAAyB,MAAO,eAAA,CAAgB;AACzD,OAAO,EAAE,iBAAA,EAAkB,MAAO,iBAAA,CAAkB;AACpD,OAAO,EAAE,IAAA,EAAK,MAAO,WAAA,CAAY;AAGjC,OAAO,EAAE,GAAA,EAAI,MAAO,SAAA,CAAU;AAE9B;IAAA;IAkBA,CAAC;IAAD,aAAC;AAAD,CAlBA,AAkBC,IAAA;;AAOD;IASE,oBAAY,UAAkB;QAA9B,iBAEC;QALM,UAAK,GAAY,EAAE,CAAC;QAsBpB,gBAAW,GAAG,UACnB,KAAS,EACT,gBAAyB;YAEzB,EAAE,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBACrB,MAAM,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC;oBAC5B,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;gBACrB,CAAC,CAAC,CAAC;YACL,CAAC;YAED,KAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACrB,CAAC,CAAC;QA7BA,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC;IAC5B,CAAC;IAEM,iCAAY,GAAnB,UAAoB,SAAoB,EAAE,OAAoB;QAApB,wBAAA,EAAA,YAAoB;QAC5D,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC;IAC3D,CAAC;IAEM,6BAAQ,GAAf;QACE,2CAA2C;QAC3C,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAClD,CAAC;IAEM,gCAAW,GAAlB;QACE,EAAE,CAAC,CAAC,iBAAiB,CAAC,IAAI,CAAC,mBAAmB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;YAC3D,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrD,CAAC;IACH,CAAC;IAeD,iDAAiD;IAC1C,iCAAY,GAAnB,UAAoB,IAA6B;QAC/C,IAAI,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QAEhC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;YACnB,SAAS,GAAM,SAAS,SAAI,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,UAAU,CAAG,CAAC;QAC5D,CAAC;QAED,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IACI,yBAAc,GAA2C;QAChE,mBAAmB,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;KACtC,CAAC;IACF,iBAAC;CAtDD,AAsDC,IAAA;SAtDY,UAAU","file":"base-widget.js","sourceRoot":"","sourcesContent":["import { Input, OnDestroy, OnInit } from \"@angular/core\";\nimport { isPlatformBrowser } from \"@angular/common\";\nimport { noop } from \"lodash-es\";\n\nimport { NgAisInstantSearch } from \"./instantsearch/instantsearch\";\nimport { bem } from \"./utils\";\n\nexport class Widget {\n  public init: () => void;\n  public getConfiguration: () => object;\n  public render: (\n    params: {\n      templatesConfig: object;\n      state: object;\n      results: {}[];\n      createURL: (value: any) => string;\n      instantSearchInstance: object;\n    }\n  ) => void;\n  public dispose: (\n    params: {\n      helper: object;\n      state: object;\n    }\n  ) => object | void;\n}\n\nexport type Connector = (\n  renderFn: (state: object, isFirstRendering: boolean) => void,\n  unmountFn: () => void\n) => (widgetOptions?: object) => Widget;\n\nexport class BaseWidget implements OnInit, OnDestroy {\n  public instantSearchParent: any;\n\n   public autoHideContainer?: boolean;\n\n  public widget?: Widget;\n  public state?: object = {};\n  public cx: Function;\n\n  constructor(widgetName: string) {\n    this.cx = bem(widgetName);\n  }\n\n  public createWidget(connector: Connector, options: object = {}) {\n    this.widget = connector(this.updateState, noop)(options);\n  }\n\n  public ngOnInit() {\n    // add widget to the InstantSearch Instance\n    this.instantSearchParent.addWidget(this.widget);\n  }\n\n  public ngOnDestroy() {\n    if (isPlatformBrowser(this.instantSearchParent.platformId)) {\n      this.instantSearchParent.removeWidget(this.widget);\n    }\n  }\n\n  public updateState = (\n    state: {},\n    isFirstRendering: boolean\n  ): Promise<void> | void => {\n    if (isFirstRendering) {\n      return Promise.resolve().then(() => {\n        this.state = state;\n      });\n    }\n\n    this.state = state;\n  };\n\n  // helper method for genering item list className\n  public getItemClass(item: { isRefined?: boolean }) {\n    let className = this.cx(\"item\");\n\n    if (item.isRefined) {\n      className = `${className} ${this.cx(\"item\", \"selected\")}`;\n    }\n\n    return className;\n  }\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'autoHideContainer': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}