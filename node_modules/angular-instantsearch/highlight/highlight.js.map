{"version":3,"sources":["../../src/highlight/highlight.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAA,EAAW,KAAA,EAAM,MAAO,eAAA,CAAgB;AACjD,OAAO,EAAE,aAAA,EAAuB,GAAA,EAAI,MAAO,WAAA,CAAY;AACvD,OAAO,EAAE,GAAA,EAAI,MAAO,UAAA,CAAW;AAG/B;IAAA;QAGG,YAAO,GAAW,IAAI,CAAC;QAExB,OAAE,GAAG,GAAG,CAAC,WAAW,CAAC,CAAC;IA4DxB,CAAC;IA1DC,sBAAI,mCAAO;aAAX;YACE,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,KAAK,aAAa,CAAC,CAAC,CAAC;gBACrC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW;oBACzB,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC;oBAC/C,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;YACrB,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;gBAChD,IAAM,oBAAoB,GAAG,GAAG,CAC9B,IAAI,CAAC,GAAG,CAAC,gBAAgB,EACzB,IAAI,CAAC,SAAS,CACf,CAAC;gBAEF,kDAAkD;gBAClD,EAAE,CAAC,CACD,aAAa,CAAC,oBAAoB,CAAC;oBACnC,OAAO,oBAAoB,CAAC,KAAK,KAAK,QACxC,CAAC,CAAC,CAAC;oBACD,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;gBAC7D,CAAC;YACH,CAAC;YAED,IAAM,QAAQ,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YAC/C,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACd,OAAO,CAAC,IAAI,CACV,+BACE,IAAI,CAAC,SAAS,qDACkC,CACnD,CAAC;gBAEF,MAAM,CAAC,EAAE,CAAC;YACZ,CAAC;YAED,MAAM,CAAC,QAAQ,CAAC;QAClB,CAAC;;;OAAA;IAED,2CAAkB,GAAlB,UAAmB,KAAa;QAC9B,MAAM,CAAC,KAAK;aACT,OAAO,CACN,IAAI,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,EACvB,MAAI,IAAI,CAAC,OAAO,iBAAW,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,QAAI,CACtD;aACA,OAAO,CAAC,IAAI,MAAM,CAAC,OAAO,EAAE,GAAG,CAAC,EAAE,OAAK,IAAI,CAAC,OAAO,MAAG,CAAC,CAAC;IAC7D,CAAC;IACI,yBAAU,GAA0B;QAC3C,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;oBACxB,QAAQ,EAAE,kBAAkB;oBAC5B,QAAQ,EAAE,wDAAoD;iBAC/D,EAAG,EAAE;KACL,CAAC;IACF,kBAAkB;IACX,6BAAc,GAAmE,cAAM,OAAA,EAC7F,EAD6F,CAC7F,CAAC;IACK,6BAAc,GAA2C;QAChE,WAAW,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;QAC/B,KAAK,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;QACzB,SAAS,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;KAC5B,CAAC;IACF,qBAAC;CAjED,AAiEC,IAAA;SAjEY,cAAc","file":"highlight.js","sourceRoot":"","sourcesContent":["import { Component, Input } from \"@angular/core\";\nimport { isPlainObject, escape, get } from \"lodash-es\";\nimport { bem } from \"../utils\";\n\n\nexport class NgAisHighlight {\n   attribute: string;\n   hit: { _highlightResult?: {}; label?: string; highlighted?: string };\n   tagName: string = \"em\";\n\n  cx = bem(\"Highlight\");\n\n  get content() {\n    if (this.attribute === \"highlighted\") {\n      return this.hit.highlighted\n        ? this.replaceWithTagName(this.hit.highlighted)\n        : this.hit.label;\n    }\n\n    if (this.hit.hasOwnProperty(\"_highlightResult\")) {\n      const attributeHighlighted = get(\n        this.hit._highlightResult,\n        this.attribute\n      );\n\n      // check that the attributeHighlighted is a string\n      if (\n        isPlainObject(attributeHighlighted) &&\n        typeof attributeHighlighted.value === \"string\"\n      ) {\n        return this.replaceWithTagName(attributeHighlighted.value);\n      }\n    }\n\n    const fallback = get(this.hit, this.attribute);\n    if (!fallback) {\n      console.warn(\n        `Could not find attribute [${\n          this.attribute\n        }] into hit object, will display an empty string.`\n      );\n\n      return \"\";\n    }\n\n    return fallback;\n  }\n\n  replaceWithTagName(value: string) {\n    return value\n      .replace(\n        new RegExp(\"<em>\", \"g\"),\n        `<${this.tagName} class=\"${this.cx(\"highlighted\")}\">`\n      )\n      .replace(new RegExp(\"</em>\", \"g\"), `</${this.tagName}>`);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: \"ng-ais-highlight\",\n  template: `<span [class]=\"cx()\" [innerHtml]=\"content\"></span>`\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'attribute': [{ type: Input },],\n'hit': [{ type: Input },],\n'tagName': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}