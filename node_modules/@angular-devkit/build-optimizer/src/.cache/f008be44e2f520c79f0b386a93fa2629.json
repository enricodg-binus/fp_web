{"remainingRequest":"/Users/enrico/code/angular/fp_web/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--3-1!/Users/enrico/code/angular/fp_web/node_modules/instantsearch.js/es/lib/escape-highlight.js","dependencies":[{"path":"/Users/enrico/code/angular/fp_web/node_modules/instantsearch.js/es/lib/escape-highlight.js","mtime":499162500000},{"path":"/Users/enrico/code/angular/fp_web/node_modules/cache-loader/dist/cjs.js","mtime":1522355410796},{"path":"/Users/enrico/code/angular/fp_web/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1522355408304}],"contextDependencies":[],"result":["var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport reduce from 'lodash/reduce';\nimport escape from 'lodash/escape';\nimport isArray from 'lodash/isArray';\nimport isPlainObject from 'lodash/isPlainObject';\n\nexport var tagConfig = {\n  highlightPreTag: '__ais-highlight__',\n  highlightPostTag: '__/ais-highlight__'\n};\n\nfunction replaceWithEmAndEscape(value) {\n  return escape(value).replace(new RegExp(tagConfig.highlightPreTag, 'g'), '<em>').replace(new RegExp(tagConfig.highlightPostTag, 'g'), '</em>');\n}\n\nfunction recursiveEscape(input) {\n  if (isPlainObject(input) && typeof input.value !== 'string') {\n    return reduce(input, function (acc, item, key) {\n      return _extends({}, acc, _defineProperty({}, key, recursiveEscape(item)));\n    }, {});\n  }\n\n  if (isArray(input)) {\n    return input.map(recursiveEscape);\n  }\n\n  return _extends({}, input, {\n    value: replaceWithEmAndEscape(input.value)\n  });\n}\n\nexport default function escapeHits(hits) {\n  if (hits.__escaped === undefined) {\n    hits = hits.map(function (hit) {\n      if (hit._highlightResult) {\n        hit._highlightResult = recursiveEscape(hit._highlightResult);\n      }\n\n      if (hit._snippetResult) {\n        hit._snippetResult = recursiveEscape(hit._snippetResult);\n      }\n\n      return hit;\n    });\n    hits.__escaped = true;\n  }\n\n  return hits;\n}\n\nexport function escapeFacets(facetHits) {\n  return facetHits.map(function (h) {\n    return _extends({}, h, {\n      highlighted: replaceWithEmAndEscape(h.highlighted)\n    });\n  });\n}",null]}